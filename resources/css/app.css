@import 'tailwindcss';

@source '../../vendor/laravel/framework/src/Illuminate/Pagination/resources/views/*.blade.php';
@source '../../storage/framework/views/*.php';
@source '../**/*.blade.php';
@source '../**/*.js';

@theme {
    /* Design system pro — palette Go Akademi (rouge / noir) */
    --font-sans: 'Inter', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
        'Segoe UI Symbol', 'Noto Color Emoji';
    --font-display: 'Bebas Neue', sans-serif;
    --color-go-red: #b91c1c;
    --color-go-red-dark: #991b1b;
    --color-go-black: #0a0a0a;
    /* Espacement sections */
    --section-padding-y: 5rem; /* py-20 */
    --section-padding-x: 1rem; /* px-4 sm:px-6 lg:px-8 */
}

/* Variables de thème : une seule source de vérité (fond, texte, header) */
:root,
html[data-theme="light"] {
    --color-bg: #ffffff;
    --color-text: #171717;
    --color-text-muted: #525252;
    --color-header-bg: #ffffff;
    --color-header-border: #0a0a0a;
    --color-header-text: #171717;
}
html[data-theme="dark"] {
    --color-bg: #0a0a0a;
    --color-text: #f5f5f5;
    --color-text-muted: #a3a3a3;
    --color-header-bg: #171717;
    --color-header-border: #404040;
    --color-header-text: #fafafa;
}

/* Transition fluide au changement de thème (0.3s) */
html {
    transition: background-color 0.3s ease, color 0.3s ease;
}

.font-display { font-family: var(--font-display); }

/* Accessibilité : texte visible uniquement pour les lecteurs d'écran */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* Corps de page : couleurs forcées par thème (priorité sur Tailwind) + transition 0.3s */
html[data-theme="light"] body,
html[data-theme="dark"] body,
body {
    background-color: var(--color-bg) !important;
    color: var(--color-text) !important;
    transition: background-color 0.3s ease, color 0.3s ease;
}
html[data-theme="light"] main,
html[data-theme="dark"] main,
main {
    color: var(--color-text) !important;
    transition: color 0.3s ease;
}

/* Admin */
@layer components {
    .admin-card { @apply rounded-xl border-2 border-neutral-200 bg-white shadow-sm transition hover:border-red-200 hover:shadow-md; }
    .admin-input { @apply mt-1 w-full rounded-lg border border-neutral-300 bg-white px-4 py-2.5 text-neutral-800 transition focus:border-red-500 focus:outline-none focus:ring-2 focus:ring-red-500/20; }
    .admin-btn-primary { @apply inline-flex items-center gap-2 rounded-lg bg-red-700 px-4 py-2 text-sm font-semibold text-white transition hover:bg-red-800; }
    .admin-btn-secondary { @apply inline-flex items-center gap-2 rounded-lg border border-neutral-300 bg-white px-4 py-2 text-sm font-semibold text-neutral-700 transition hover:bg-neutral-50; }
    .admin-badge { @apply inline-flex rounded-full px-2.5 py-0.5 text-xs font-medium; }
}

/* Design poussé rouge / noir / blanc */
@layer components {
    .btn-go { @apply inline-block rounded-none border-2 border-red-700 bg-red-700 px-8 py-3 font-display text-lg tracking-wider text-white transition hover:bg-red-800 hover:border-red-800; }
    .btn-go-outline { @apply inline-block rounded-none border-2 border-white px-8 py-3 font-display text-lg tracking-wider text-white transition hover:bg-white hover:text-black; }
    .section-title { @apply font-display text-3xl tracking-[0.2em] text-red-700 md:text-4xl; }
    .card-go { @apply border-2 border-black bg-white p-6 shadow-[4px_4px_0_0_#000] transition hover:shadow-[6px_6px_0_0_#000]; }
}

/* Menu en ligne : barre horizontale qui se réduit et passe sur plusieurs lignes si besoin */
.menu-tile { white-space: nowrap; transition: background-color 0.2s ease, color 0.2s ease; }

/* ----- Animations et bonus ----- */

/* Respect des préférences utilisateur pour réduire les animations */
@media (prefers-reduced-motion: reduce) {
    *, *::before, *::after { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; }
}

/* Keyframes */
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}
@keyframes slideUp {
    from { opacity: 0; transform: translateY(24px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Éléments au scroll : toujours visibles (plus de cache initial qui masquait tout le contenu) */
.animate-on-scroll {
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
}
.animate-on-scroll,
.animate-on-scroll.animate-visible {
    opacity: 1;
    transform: translateY(0);
}
.animate-on-scroll.animate-delay-1 { transition-delay: 0.1s; }
.animate-on-scroll.animate-delay-2 { transition-delay: 0.2s; }
.animate-on-scroll.animate-delay-3 { transition-delay: 0.3s; }
.animate-on-scroll.animate-delay-4 { transition-delay: 0.4s; }

/* Apparition immédiate au chargement (hero, etc.) */
.animate-instant {
    animation: fadeIn 0.6s ease-out forwards;
}
.animate-hero .animate-hero-item {
    opacity: 0;
    animation: slideUp 0.7s ease-out forwards;
}
.animate-hero .animate-hero-item:nth-child(1) { animation-delay: 0.1s; }
.animate-hero .animate-hero-item:nth-child(2) { animation-delay: 0.2s; }
.animate-hero .animate-hero-item:nth-child(3) { animation-delay: 0.3s; }
.animate-hero .animate-hero-item:nth-child(4) { animation-delay: 0.4s; }
.animate-hero .animate-hero-item:nth-child(5) { animation-delay: 0.5s; }
.animate-hero .animate-hero-item:nth-child(6) { animation-delay: 0.6s; }
.animate-hero .animate-hero-item:nth-child(7) { animation-delay: 0.7s; }
.animate-hero .animate-hero-item:nth-child(8) { animation-delay: 0.8s; }

/* Cards et boutons améliorés */
.card-go {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.card-go:hover {
    transform: translateY(-4px);
    box-shadow: 6px 6px 0 0 #000, 0 12px 24px -8px rgba(0,0,0,0.15);
}
.btn-go, .btn-go-outline {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.btn-go:hover, .btn-go-outline:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}
.btn-go:active, .btn-go-outline:active {
    transform: translateY(0);
}

/* Header avec léger effet au scroll */
header {
    transition: box-shadow 0.3s ease;
}
header.scrolled {
    box-shadow: 0 4px 0 0 #b91c1c, 0 8px 24px -4px rgba(0,0,0,0.1);
}

/* Bouton retour en haut */
#back-to-top {
    position: fixed;
    bottom: 1.5rem;
    right: 1.5rem;
    z-index: 50;
    width: 3rem;
    height: 3rem;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #b91c1c;
    color: white;
    border: 2px solid black;
    border-radius: 0.5rem;
    cursor: pointer;
    opacity: 0;
    visibility: hidden;
    transform: translateY(1rem);
    transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
}
#back-to-top.visible {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}
#back-to-top:hover {
    background: #991b1b;
    transform: translateY(-2px);
}

/* ----- Lien d'évitement (accessibilité) -----
   Masqué visuellement, visible uniquement au focus clavier.
   Pattern recommandé : clip + position pour éviter tout débordement. */
.skip-link {
    position: absolute;
    /* Hors écran et clip pour garantir l'invisibilité */
    left: -9999px;
    top: auto;
    width: 1px;
    height: 1px;
    overflow: hidden;
    clip: rect(0 0 0 0);
    clip-path: inset(50%);
    padding: 0.75rem 1rem;
    background: #b91c1c;
    color: white;
    font-weight: 600;
    border: 2px solid black;
    border-radius: 0.5rem;
    z-index: 9999;
    transition: none;
}
.skip-link:focus {
    /* Réapparition au focus clavier uniquement */
    left: 1rem;
    top: 1rem;
    width: auto;
    height: auto;
    overflow: visible;
    clip: auto;
    clip-path: none;
    outline: 3px solid white;
    outline-offset: 2px;
}

/* ----- Focus visible (navigation clavier) ----- */
.focus-primary:focus-visible,
a:focus-visible,
button:focus-visible {
    outline: 2px solid #b91c1c;
    outline-offset: 2px;
}
input:focus-visible,
textarea:focus-visible {
    outline: 2px solid #b91c1c;
    outline-offset: 0;
}

/* ----- Mode sombre : surcharge des utilitaires Tailwind dans le contenu ----- */
html[data-theme="dark"] body {
    background-color: var(--color-bg) !important;
    color: var(--color-text) !important;
}
html[data-theme="light"] body,
html[data-theme="light"] main {
    background-color: var(--color-bg) !important;
    color: var(--color-text) !important;
}
/* En dark : tout .text-black dans main devient lisible */
html[data-theme="dark"] main .text-black {
    color: var(--color-text) !important;
}
html[data-theme="dark"] main .text-neutral-600,
html[data-theme="dark"] main .text-neutral-700 {
    color: var(--color-text-muted) !important;
}
html[data-theme="dark"] .site-header {
    box-shadow: 0 4px 0 0 #b91c1c;
}
html[data-theme="dark"] .site-header.scrolled {
    box-shadow: 0 4px 0 0 #b91c1c, 0 8px 24px -4px rgba(0,0,0,0.5);
}
html[data-theme="dark"] .logo-light { display: none !important; }
html[data-theme="dark"] .logo-dark { display: block !important; }
html[data-theme="dark"] .header-logo-text { color: #fafafa; }
html[data-theme="dark"] .header-logo-text .text-red-700 { color: #f87171; }
html[data-theme="dark"] .menu-tile {
    color: #e5e5e5;
}
html[data-theme="dark"] .menu-tile:hover {
    background: #404040;
    color: #fafafa;
}
html[data-theme="dark"] .menu-tile.bg-black,
html[data-theme="dark"] .menu-tile.bg-neutral-800 {
    background: #404040 !important;
    color: #fafafa !important;
}
html[data-theme="dark"] .theme-icon-sun { display: none !important; }
html[data-theme="dark"] .theme-icon-moon { display: inline-flex !important; }
html[data-theme="dark"] .theme-toggle { color: #fafafa; }
html[data-theme="light"] .theme-icon-moon { display: none !important; }
html[data-theme="light"] .theme-icon-sun { display: inline-flex !important; }

html[data-theme="dark"] .site-footer {
    background: #0a0a0a;
    border-color: #404040;
}
html[data-theme="dark"] .site-footer a:hover {
    color: #f87171;
}
html[data-theme="dark"] .site-footer .text-neutral-400 { color: #737373; }
html[data-theme="dark"] .site-footer .opacity-60:hover { color: #fafafa; }

html[data-theme="dark"] .section-title { color: #f87171; }
html[data-theme="dark"] .card-go {
    background: #262626;
    border-color: #525252;
    box-shadow: 4px 4px 0 0 #525252;
}
html[data-theme="dark"] .card-go:hover {
    box-shadow: 6px 6px 0 0 #525252, 0 12px 24px -8px rgba(0,0,0,0.4);
}
html[data-theme="dark"] .card-go h3,
html[data-theme="dark"] .card-go .font-display.text-xl { color: #f87171; }
html[data-theme="dark"] .card-go p,
html[data-theme="dark"] .card-go .text-neutral-600,
html[data-theme="dark"] .card-go .text-neutral-700 { color: #d4d4d4; }
html[data-theme="dark"] .card-go .text-black { color: var(--color-text) !important; }
html[data-theme="dark"] .bg-neutral-100 { background: #262626; }
/* Titres et paragraphes dans main : lisibles en dark */
html[data-theme="dark"] main h1:not(.text-white):not([class*="text-white"]),
html[data-theme="dark"] main h2,
html[data-theme="dark"] main h3,
html[data-theme="dark"] main p {
    color: inherit;
}
html[data-theme="dark"] .bg-neutral-100 .section-title { color: #f87171; }
html[data-theme="dark"] .bg-neutral-100 p,
html[data-theme="dark"] .bg-neutral-100 .text-neutral-700 { color: #d4d4d4; }

html[data-theme="dark"] #back-to-top {
    background: #b91c1c;
    border-color: #525252;
}
html[data-theme="dark"] #back-to-top:hover { background: #991b1b; }

/* Bordure / texte noir génériques en dark */
html[data-theme="dark"] .border-black { border-color: #404040; }
html[data-theme="dark"] .border-t-2.border-black { border-color: #404040; }
html[data-theme="dark"] .border-b-2.border-black { border-color: #404040; }
html[data-theme="dark"] .border-2.border-black { border-color: #525252; }

/* Formulaire contact */
html[data-theme="dark"] input,
html[data-theme="dark"] textarea {
    background: #262626;
    border-color: #525252;
    color: #fafafa;
}
html[data-theme="dark"] input::placeholder,
html[data-theme="dark"] textarea::placeholder { color: #a3a3a3; }
html[data-theme="dark"] label { color: #e5e5e5; }

/* Boutons en dark */
html[data-theme="dark"] .btn-go { border-color: #b91c1c; }
html[data-theme="dark"] .btn-go-outline { border-color: #fafafa; color: #fafafa; }
html[data-theme="dark"] .btn-go-outline:hover { background: #fafafa; color: #0a0a0a; }

/* Bande rouge (intro) reste rouge */
html[data-theme="dark"] .bg-red-700 { background: #991b1b; }

/* Liens dans le contenu */
html[data-theme="dark"] main a:not(.menu-tile):not(.btn-go):not(.btn-go-outline) { color: #f87171; }
html[data-theme="dark"] main a:not(.menu-tile):not(.btn-go):not(.btn-go-outline):hover { color: #fca5a5; }

/* Message succès formulaire */
html[data-theme="dark"] .bg-green-50 { background: #14532d; }
html[data-theme="dark"] .border-green-600 { border-color: #22c55e; }
html[data-theme="dark"] .text-green-800 { color: #bbf7d0; }

/* Menu mobile : masquer hamburger en impression */
@media print {
    .skip-link, .theme-toggle, .menu-toggle, #back-to-top { display: none !important; }
    .mobile-menu { display: flex !important; }
    body { background: white; color: black; }
    .site-header, .site-footer { border-color: #000; }
    a[href]:after { content: none !important; }
}

